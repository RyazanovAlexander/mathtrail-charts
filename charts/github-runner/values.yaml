# -- Number of runner replicas
replicaCount: 1

# -- Container image
image:
  repository: k3d-mathtrail-registry.localhost:5050/ci-runner
  tag: latest
  pullPolicy: Always

# -- GitHub configuration (REQUIRED)
github:
  # Repository URL, e.g. https://github.com/MathTrail/mentor-api
  # Can also be an org URL: https://github.com/MathTrail
  url: ""
  # Runner registration token (stored in a Secret)
  runnerToken: ""

# -- Runner labels (comma-separated)
runnerLabels: "self-hosted,linux,k3s,buildah-ready"

# -- Runner name prefix
runnerNamePrefix: "k3s-runner"

# -- Resource requests/limits
resources:
  requests:
    cpu: "500m"
    memory: "512Mi"
  limits:
    cpu: "2"
    memory: "2Gi"

# -- ServiceAccount
serviceAccount:
  create: true
  name: ""
  annotations: {}

# -- RBAC
rbac:
  create: true

# -- BuildKit daemon (sidecar for in-cluster builds)
buildkit:
  enabled: true
  image:
    repository: moby/buildkit
    tag: v0.27.1-rootless
    pullPolicy: IfNotPresent
  port: 1234
  # Rootless security context
  securityContext:
    runAsUser: 1000
    runAsGroup: 1000
    seccompProfile:
      type: Unconfined
  resources:
    requests:
      cpu: "250m"
      memory: "512Mi"
    limits:
      cpu: "2"
      memory: "4Gi"
  # Layer cache size
  cacheSize: "10Gi"
  # Insecure registries for k3d
  insecureRegistries:
    - "k3d-mathtrail-registry.localhost:5050"

# -- Node selector
nodeSelector: {}

# -- Tolerations
tolerations: []
